:root{
  --bg1:#2e003e; /* Morado oscuro profundo */
  --bg2:#512b58; /* Morado medio */
  --bg3:#1b001f; /* Casi negro púrpura */
  --accent:#b980f0; /* Morado claro brillante */
  --light:#f5e6ff; /* Fondo claro con tinte morado */
  --ink:#2a003f;   /* Texto principal morado oscuro */
  --soft:#d8b4f8;  /* Morado pastel */
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:#fff;
  /* Scroll vertical habilitado para ver cartas largas */
  overflow-x:hidden; overflow-y:auto;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(255,255,255,.08), transparent 60%),
              radial-gradient(800px 400px at 90% 20%, rgba(185,128,240,.08), transparent 60%),
              linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

/* Partículas */
.stars{position:fixed; inset:0; pointer-events:none; z-index:0}
.stars span{
  position:absolute; width:2px; height:2px; border-radius:50%; background:rgba(255,255,255,.85);
  box-shadow:0 0 8px rgba(255,255,255,.9);
  animation: twinkle 5s linear infinite;
}
@keyframes twinkle{ 50%{ opacity:.25; transform: translateY(10px) scale(1.2);} }

/* Corazones */
.hearts{position:fixed; inset:0; pointer-events:none; z-index:1}
.heart{
  position:absolute; width:14px; height:14px; transform: rotate(45deg);
  background: linear-gradient(180deg, var(--soft), var(--accent));
  box-shadow:0 4px 12px rgba(185,128,240,.35);
  animation: floatUp var(--dur, 8s) linear infinite;
}
.heart::before,.heart::after{
  content:""; position:absolute; width:14px; height:14px; border-radius:50%; background:inherit;
}
.heart::before{ left:-7px }
.heart::after{ top:-7px }
@keyframes floatUp{
  from{ transform:translateY(0) rotate(45deg); opacity:.95 }
  to{ transform:translateY(-120vh) rotate(45deg); opacity:0 }
}

/* Contenedor central */
.wrap{ position:relative; z-index:2; min-height:100vh; display:grid; place-items:center; padding:24px }

/* Sobre + Carta */
.envelope{ position:relative; width:min(92vw, 760px); perspective: 2000px; }
.shadow{ filter: drop-shadow(0 30px 40px rgba(0,0,0,.35)); }
.env-body{
  background:#fff; border-radius:16px; height:min(62vh, 520px);
  transform-style:preserve-3d; position:relative; overflow:hidden;
}
/* Al abrir: liberar altura y overflow */
.open .env-body{ height:auto; overflow:visible; }

/* Solapa */
.flap{
  position:absolute; inset:0; transform-origin: top; background: linear-gradient(180deg, #f1e4ff, #e6ccff);
  border-bottom-left-radius:16px; border-bottom-right-radius:16px; height:60%;
  transform: rotateX(0deg); transition: transform 1.2s cubic-bezier(.2,.8,.2,1);
}
.seal{
  position:absolute; bottom:-18px; left:50%; transform:translateX(-50%); width:64px; height:64px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #e9d5ff, #c4a1ff 60%);
  box-shadow: inset 0 2px 10px rgba(255,255,255,.6), 0 6px 18px rgba(140,82,255,.35);
  display:grid; place-items:center; color:#5a189a; font-weight:700; letter-spacing:.06em; z-index:2;
}
.open .flap{ transform: rotateX(-160deg); }

/* Papel */
.paper{
  position:absolute; inset:0;
  padding:28px 28px 88px; /* más espacio abajo para que el sello no tape el texto */
  background: linear-gradient(#fff, var(--light));
  border-radius:16px; transform: translateY(45%);
  transition: transform 1.1s cubic-bezier(.2,.8,.2,1) .25s;
  display:flex; flex-direction:column; justify-content:space-between; color:var(--ink);
  background-image: repeating-linear-gradient(transparent 0 34px, rgba(185,128,240,.09) 35px 36px);
}
/* Al abrir: que fluya y aumente la altura natural */
.open .paper{ position:relative; inset:auto; transform:none; }

.title{
  font-family:'Great Vibes', cursive; font-size: clamp(36px, 6vw, 64px); color:#5a189a; text-align:center;
  text-shadow:0 8px 30px rgba(140,82,255,.45);
}
.subtitle{ text-align:center; font-weight:600; letter-spacing:.3px; color:#7b2cbf }
.letter{
  font-size:clamp(16px, 2.2vw, 20px); line-height:1.8; background:rgba(255,255,255,.65); border-radius:14px; padding:18px 20px;
  box-shadow:0 10px 30px rgba(140,82,255,.12);
}
.signature{ font-family:'Great Vibes', cursive; font-size: clamp(28px, 5vw, 52px); color:#5a189a; text-align:right }

/* Controles */
.controls{ display:flex; gap:12px; justify-content:center; margin-top:16px; flex-wrap:wrap }
.btn{
  appearance:none; border:none; border-radius:999px; padding:12px 20px; cursor:pointer;
  background: linear-gradient(90deg, #c79bff, #8a4fff); color:white; font-weight:700; letter-spacing:.3px;
  box-shadow: 0 8px 16px rgba(140,82,255,.35), inset 0 1px 0 rgba(255,255,255,.6);
  transform: translateY(0); transition:.2s transform ease, .2s filter ease;
}
.btn:hover{ transform: translateY(-2px); filter:brightness(1.06) }

/* Indicador pulsante */
.pulse{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); color:#ffffffb3; font-weight:600; letter-spacing:.4px; }
.pulse::after{ content:"Haz clic para abrir"; display:inline-block; animation: ping 1.6s ease-in-out infinite; }
@keyframes ping{ 0%{opacity:0} 30%{opacity:1} 60%{opacity:.6} 100%{opacity:0} }

/* Lienzo confeti */
#confetti{ position:fixed; inset:0; pointer-events:none; z-index:3 }

/* Tooltip bonito */
.hint{ position:fixed; bottom:14px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,.14); padding:8px 14px; border-radius:999px; font-size:12px; backdrop-filter: blur(8px); border:1px solid rgba(255,255,255,.25) }

/* Accesibilidad */
.btn:focus{ outline: 3px solid var(--soft); outline-offset: 2px }

/* Ajustes móviles */
@media (max-width:540px){
  .paper { padding: 18px 16px 100px; } /* más espacio al final en móviles */
  .title { font-size: clamp(28px, 8vw, 48px); }
  .letter{ font-size:15.5px; line-height:1.7 }
  .btn{ padding:10px 16px; font-size:14px }
}
